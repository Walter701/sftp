<partnerships>
    <partner name="OpenDev"
             as2_id="OpenDev_OID"
             x509_alias="opendev"
             email="as2msgs@opendev.com"/>

    <partner name="BI"
             as2_id="BI_OID"
             x509_alias="bi"
             email="as2msgs@bi.com"/>

    <partnership name="OpenDev-to-BI">
        <sender name="OpenDev"/>
        <receiver name="BI"/>
        <pollerConfig enabled="true"/>
        <attribute name="protocol" value="as2"/>
        <attribute name="content_transfer_encoding" value="binary"/>
        <!-- attribute name="compression_type" value="ZLIB"/ -->
        <attribute name="subject" value="File $attributes.filename$ sent from $sender.name$ to $receiver.name$"/>
        <attribute name="as2_url" value="http://192.168.0.16:10080"/>
        <attribute name="as2_mdn_to" value="edi@opendev.com"/>
        <attribute name="as2_mdn_options" value="signed-receipt-protocol=required, pkcs7-signature; signed-receipt-micalg=required, $attribute.sign$"/>
        <attribute name="as2_receipt_option" value="$properties.as2_async_mdn_url$"/> 
         
        <attribute name="encrypt" value="AES256"/>
        <attribute name="sign" value="SHA256"/>
        <attribute name="resend_max_retries" value="3"/>
        <attribute name="prevent_canonicalization_for_mic" value="false"/>
        <attribute name="rename_digest_to_old_name" value="false"/>
        <attribute name="remove_cms_algorithm_protection_attrib" value="false"/>
	<attribute name="custom_mime_headers" value="x-authorization: Basic kukarda"/>
	<attribute name="add_custom_mime_headers_to_http" value="true"/>
		<!--
		Example for adding dynamic custom headers to Mime body part using delimiters where filename is of form XXX-YYY-ZZZ or XXX_YYY-ZZZ etc
        <attribute name="custom_mime_header_names_from_filename" value="header.X-CustomRouteId,header.X-CustomCenter, junk.extraStuff"/>
        <attribute name="custom_mime_header_name_delimiters_in_filename" value="-_"/>

		Example for adding dynamic custom headers to Mime body part where filename is of form XXX-YYY.msg 
        <attribute name="custom_mime_header_names_from_filename" value="X-CustomRouteId,X-CustomCenter"/>
        <attribute name="custom_mime_header_names_regex_on_filename" value="([^-]*)-([^.]*).msg"/>

		Example for parsing filename into parameters that can be referenced this is a file name of the form XXXNNNN.edi where X is alphabetic and N are numerics 
        <attribute name="attribute_names_from_filename" value="P-DynamicParm1,P-DynamicParm2"/>
        <attribute name="attribute_values_regex_on_filename" value="([A-Za-z]*)([^.]*).edi"/>
		-->
		<!--
		Example attributes to support splitting files into smaller chunks
        <attribute name="split_file_threshold_size_in_bytes" value="1073741824"/>
        <attribute name="split_file_contains_header_row" value="true"/>
        <attribute name="split_file_name_prefix" value="SF"/>
		-->
    </partnership>
    <partnership name="BI-to-OpenDev">
        <sender name="BI"/>
        <receiver name="OpenDev"/>
        <attribute name="store_received_file_to" value="$properties.storageBaseDir$/inbox/$msg.receiver.as2_id$/inbox/$msg.sender.as2_id$-$rand.12345$-$msg.content-disposition.filename$"/>
        <attribute name="reject_unsigned_messages" value="true"/>
    </partnership>
</partnerships>
